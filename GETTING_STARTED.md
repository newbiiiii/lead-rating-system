# Lead Rating System - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ¯ é¡¹ç›®å·²åˆå§‹åŒ–å®Œæˆï¼

æ‚¨çš„çˆ¬è™« + AI è¯„çº§ç³»ç»Ÿè„šæ‰‹æ¶å·²æ­å»ºå®Œæ¯•ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
lead-rating-system/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ scraper/                  # çˆ¬è™«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ adapters/            # æ•°æ®æºé€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ engines/             # çˆ¬è™«å¼•æ“
â”‚   â”‚   â””â”€â”€ strategies/          # åçˆ¬ç­–ç•¥
â”‚   â”œâ”€â”€ processor/               # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cleaners/           # æ¸…æ´—å™¨
â”‚   â”‚   â”œâ”€â”€ deduplicators/      # å»é‡å™¨
â”‚   â”‚   â””â”€â”€ transformers/       # è½¬æ¢å™¨
â”‚   â”œâ”€â”€ rating/                  # AI è¯„çº§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ engines/            # è¯„çº§å¼•æ“
â”‚   â”‚   â”œâ”€â”€ prompts/            # Prompt æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ scorers/            # è¯„åˆ†å™¨
â”‚   â”œâ”€â”€ automation/              # è‡ªåŠ¨åŒ–æµè½¬æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ rules/              # è§„åˆ™å¼•æ“
â”‚   â”‚   â”œâ”€â”€ integrations/       # é›†æˆæœåŠ¡
â”‚   â”‚   â””â”€â”€ notifications/      # é€šçŸ¥æœåŠ¡
â”‚   â”œâ”€â”€ workers/                 # Worker è¿›ç¨‹
â”‚   â”œâ”€â”€ queue/                   # ä»»åŠ¡é˜Ÿåˆ—
â”‚   â”œâ”€â”€ db/                      # æ•°æ®åº“
â”‚   â”œâ”€â”€ api/                     # API æœåŠ¡
â”‚   â”œâ”€â”€ config/                  # é…ç½®åŠ è½½å™¨
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts                 # ä¸»å…¥å£
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ä»£ç ï¼ˆå·²å¤åˆ¶åˆ° src/ï¼‰
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”œâ”€â”€ logs/                        # æ—¥å¿—ç›®å½•
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ config.yaml                  # ç³»ç»Ÿé…ç½®ï¼ˆå·²ç”Ÿæˆï¼‰
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ Dockerfile                   # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml           # Docker ç¼–æ’
â””â”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
```

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™çœŸå®çš„ API Key
# å¿…å¡«é¡¹ï¼š
# - OPENAI_API_KEY
# - POSTGRES_PASSWORD
# å¯é€‰é¡¹ï¼š
# - HUBSPOT_API_KEYï¼ˆCRM é›†æˆï¼‰
# - WECHAT_WEBHOOK_URLï¼ˆé€šçŸ¥ï¼‰
```

### 2. å¯åŠ¨åŸºç¡€æœåŠ¡ï¼ˆDockerï¼‰

```bash
# å¯åŠ¨ PostgreSQL å’Œ Redis
docker-compose up -d postgres redis

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

### 3. å®‰è£…ä¾èµ–ï¼ˆæ­£åœ¨è¿›è¡Œä¸­...ï¼‰

```bash
npm install
```

### 4. å¼€å‘æ¨¡å¼è¿è¡Œ

```bash
# ç¼–è¯‘ TypeScript
npm run build

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# æˆ–å•ç‹¬å¯åŠ¨æŸä¸ª Worker
npm run worker:scraper
npm run worker:rating
```

### 5. ç”Ÿäº§éƒ¨ç½²

```bash
# ä½¿ç”¨ Docker Compose éƒ¨ç½²æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f rating-worker
```

## ğŸ“ å…³é”®é…ç½®æ–‡ä»¶

### config.yaml
ç³»ç»Ÿä¸»é…ç½®æ–‡ä»¶ï¼Œå·²ä» `config.example.yaml` å¤åˆ¶ç”Ÿæˆã€‚
æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ï¼š
- æ•°æ®æºé…ç½®
- è¯„åˆ†è§„åˆ™
- æµè½¬è§„åˆ™
- é›†æˆæœåŠ¡

### .env
ç¯å¢ƒå˜é‡é…ç½®ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºå¹¶å¡«å†™æ•æ„Ÿä¿¡æ¯ã€‚

## ğŸ”§ å¼€å‘ä»»åŠ¡

æ¥ä¸‹æ¥å»ºè®®æ‚¨ï¼š

1. **å®ç°ç¬¬ä¸€ä¸ªæ•°æ®æºé€‚é…å™¨**
   - å‚è€ƒ `src/2-google-maps-adapter.ts`
   - åˆ›å»º `src/scraper/adapters/google-maps.adapter.ts`

2. **è®¾ç½®æ•°æ®åº“**
   - åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬
   - å®šä¹‰æ•°æ®æ¨¡å‹ï¼ˆä½¿ç”¨ Drizzle ORMï¼‰

3. **é…ç½® Prompt æ¨¡æ¿**
   - æ ¹æ®æ‚¨çš„äº§å“å®šåˆ¶ `config.yaml` ä¸­çš„è¯„åˆ†ç»´åº¦
   - æµ‹è¯•è¯„åˆ†å‡†ç¡®æ€§

4. **é›†æˆé€šçŸ¥æœåŠ¡**
   - é…ç½®å¾®ä¿¡/é’‰é’‰ Webhook
   - æµ‹è¯•é€šçŸ¥åŠŸèƒ½

## ğŸ“š æ–‡æ¡£èµ„æº

- [å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆ](docs/implementation_plan.md)
- [ä½¿ç”¨æŒ‡å—](README.md)
- [ä»»åŠ¡æ¸…å•](docs/task.md)

## âš ï¸ é‡è¦æé†’

1. **ä¸è¦æäº¤ .env æ–‡ä»¶**åˆ° Gitï¼ˆå·²æ·»åŠ åˆ° .gitignoreï¼‰
2. **config.yaml åŒ…å«ä¸šåŠ¡é€»è¾‘**ï¼Œå»ºè®®ç‰ˆæœ¬æ§åˆ¶
3. **ç¤ºä¾‹ä»£ç **å·²å¤åˆ¶åˆ° src/ ç›®å½•ï¼Œå¯ç›´æ¥ä½¿ç”¨æˆ–ä¿®æ”¹

---

ç­‰å¾… `npm install` å®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å¼€å‘äº†ï¼ğŸ‰
