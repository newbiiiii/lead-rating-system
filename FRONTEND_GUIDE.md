# 前端管理后台使用指南

## 🎨 功能概览

已创建现代化的管理后台界面，包含以下功能页面：

### 1. 仪表盘 (Dashboard)
- **实时统计卡片**：总公司数、高分线索、完成任务、待处理任务
- **队列状态图表**：柱状图展示各队列的等待/处理/完成状态
- **评分分布图表**：环形图展示高/中/低分线索分布
- **最新高分线索列表**：实时显示 ≥9分的优质线索

### 2. 任务管理 (Tasks)
- **添加爬取任务**：支持选择数据源（Google Maps/LinkedIn/企查查）
- **队列状态监控**：实时查看各队列详细状态
- **优先级设置**：高/中/低优先级任务调度

### 3. 公司数据 (Companies)
- **公司列表展示**：查看所有已爬取的公司数据
- **搜索功能**：按公司名称搜索（待实现）
- **分页显示**：每页20条记录

### 4. 评级结果 (Ratings)
- **AI 评分结果**：展示所有评级数据
- **评分筛选**：按分数范围筛选（全部/高分/中分）
- **详细维度展示**：基础匹配、意向信号、痛点关联分项评分
- **评分理由**：查看 AI 生成的评分解释

## 🚀 启动前端

前端已集成到 API 服务中，无需单独部署。

### 访问地址

```
http://localhost:3000
```

### 启动步骤

1. **确保 API 服务正在运行**
   ```bash
   # 在 lead-rating-system 目录下
   npx tsx src/api/server.ts
   ```

2. **打开浏览器访问**
   ```
   http://localhost:3000
   ```

3. **开始使用**
   - 查看仪表盘统计
   - 添加新的爬取任务
   - 查看公司数据和评级结果

## 📁 文件结构

```
public/
├── index.html                    # 主页面
├── assets/
    ├── css/
    │   └── dashboard.css         # 样式表（深色主题）
    └── js/
        └── dashboard.js          # JavaScript 逻辑
```

## 🎯 核心特性

### 设计特点
- ✅ **深色主题**：护眼的深色配色方案
- ✅ **渐变色彩**：紫色系主题渐变
- ✅ **流畅动画**：页面切换和悬停效果
- ✅ **响应式设计**：适配各种屏幕尺寸
- ✅ **图表可视化**：Chart.js 驱动的实时图表

### 技术栈
- HTML5 + CSS3
- Vanilla JavaScript (无框架依赖)
- Chart.js 4.4.0 (数据可视化)
- Google Fonts (Inter 字体)

## 🔧 API 集成

前端通过以下 API 端点获取数据：

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/queues/stats` | GET | 获取队列统计 |
| `/api/companies` | GET | 获取公司列表 |
| `/api/ratings` | GET | 获取评级结果 |
| `/api/tasks/scrape` | POST | 添加爬取任务 |

## 📝 自定义配置

### 修改主题颜色

编辑 `public/assets/css/dashboard.css` 中的 CSS 变量：

```css
:root {
    --primary: #667eea;        /* 主色调 */
    --secondary: #764ba2;      /* 次要色 */
    --success: #48bb78;        /* 成功色 */
    --warning: #ed8936;        /* 警告色 */
}
```

### 修改刷新间隔

编辑 `public/assets/js/dashboard.js`：

```javascript
setInterval(() => {
    // 修改这里的值（毫秒）
    loadDashboardData();
}, 30000); // 30秒改为其他值
```

## 🎨 界面预览

### 主要元素

1. **侧边栏导航**
   - Logo 和品牌名
   - 4 个导航菜单项
   - 激活状态带左侧高亮条

2. **顶部栏**
   - 当前页面标题
   - 系统运行状态指示器（绿色脉动点）
   - 通知按钮

3. **内容区域**
   - 统计卡片网格
   - 图表展示
   - 数据表格
   - 表单输入

## ⚡ 性能优化

- 图表数据自动更新（每30秒）
- 表格按需加载（分页）
- 异步 API 调用
- 最小化重绘

## 🐛 故障排查

### 问题：页面显示空白
**解决**：
1. 检查 API 服务是否运行：`http://localhost:3000/health`
2. 查看浏览器控制台是否有错误
3. 确认静态文件路径正确

### 问题：数据不显示
**解决**：
1. 检查数据库是否有数据
2. 确认 API 端点返回正常
3. 查看浏览器 Network 标签页

### 问题：图表不渲染
**解决**：
1. 确认 Chart.js CDN 可访问
2. 检查浏览器控制台错误
3. 验证数据格式正确

## 🔄 后续改进

- [ ] 添加实时 WebSocket 更新
- [ ] 实现高级搜索和筛选
- [ ] 添加导出功能（CSV/Excel）
- [ ] 公司详情弹窗
- [ ] 用户认证和权限管理
- [ ] 深色/浅色主题切换

---

**提示**：界面已设计为完全响应式，可在桌面、平板和手机上正常使用。
